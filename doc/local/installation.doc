/*!
\page installation IT++ Installation

\section toc Table of Contents
- \ref requirements
- \ref download
- \ref compilation
- \ref macosx
- \ref localinst
- \ref msvc


\section requirements IT++ Requirements

IT++ should compile without errors or warnings on most GNU/Linux systems,
on UNIX systems like Solaris SunOS, and on POSIX based environments for
Microsoft Windows like Cygwin or MinGW with MSYS. It can be also built on
Microsoft Windows NT/2000/XP using Microsoft's Visual C++ .NET, but our 
support for this compiler is limited. For GNU/Linux, SunOS, Cygwin and MinGW
we assume that you have at least the following GNU software installed on
your computer:
- <a href="http://www.gnu.org/software/make/">GNU make</a>, version 3.72.1
or later (check version with <tt>`make --version'</tt>)
- <a href="http://gcc.gnu.org/">GCC</a> - GNU Compilers Collection (gcc, g++
and g77 or gfortran), version 3.3.x or later (check version with <tt>`gcc
--version'</tt>)
.
To perform tests, two command line programs: \c sed and \c diff are
required. Optionally, you might need a few additional programs, i.e. 
<a href="http://www.doxygen.org/">Doxygen</a>, 
<a href="http://www.latex-project.org/">LaTeX</a>,
<a href="http://www.radicaleye.com/dvips.html">Dvips</a> and 
<a href="http://www.cs.wisc.edu/~ghost/">Ghostscript</a>, to generate the
HTML documentation. 

We strongly recommend that you use recent stable releases of the GCC, if
possible. We do not actively work on supporting older versions of the GCC,
and they may therefore (without prior notice) become unsupported in future
releases of IT++.

In order to use all functionality provided by the IT++ library, it is
recommended that you have some external libraries compiled and installed in
your computer. The basic set of them is: 
<a href="http://www.netlib.org/blas/">BLAS</a>,
<a href="http://www.netlib.org/lapack/">LAPACK</a> and
<a href="http://www.fftw.org/">FFTW</a> (version 3.0.0 or later). To improve
some vector based operations a C interface of BLAS, namely
<a href="http://www.netlib.org/blas/">CBLAS</a>, is also recommended.

Instead of NetLib's reference BLAS, CBLAS and LAPACK implementations, some
optimized platform-specific libraries can be used as well, i.e.:
- <a href="http://math-atlas.sourceforge.net/">ATLAS</a> (<em>Automatically
  Tuned Linear Algebra Software</em>) - includes optimised BLAS, CBLAS and a
  limited set of LAPACK routines (version 3.6.0 or later)
- <a href="http://www.intel.com/cd/software/products/asmo-na/eng/perflib/mkl/">MKL</a>  
  (<em>Intel Math Kernel Library</em>) - includes all required BLAS, CBLAS,
  LAPACK and FFT routines (version 8.0.0 or later; FFTW not required)
- <a href="http://developer.amd.com/acml.aspx">ACML</a> (<em>AMD Core Math
  Library</em>) - includes BLAS, CBLAS, LAPACK and FFT routines (version
  2.5.3 or later; FFTW not required)

It is possible to compile and use IT++ without these libraries, but the
functionality will be reduced. We therefore recommend that you take some
time and effort to provide these external libraries in your system. Please
note, that some of them (FFTW, BLAS and LAPACK) are usually included in
most modern Linux distributions.


\section download Obtaining the IT++ Source Codes

IT++ is released under the GNU General Public License (GPL) and hence the
source code of the IT++ library is available for free download. To obtain
the IT++ source code, visit the project pages on SourceForge:
- <a href="http://itpp.sourceforge.net/">http://itpp.sourceforge.net/</a>
.
and download the file named \c itpp-\<VERSION\>.tar.gz or 
\c itpp-\<VERSION\>.tar.bz2, where \c \<VERSION\> is the latest release
number, e.g. 3.9.0.


\section compilation General IT++ Configuration, Compilation and Installation Instructions

Assuming that you have already downloaded the latest IT++ sources, untar
and unpack the sources, and enter the unpacked directory. Depending on the
package type you have downloaded, use the following commands:

\code 
% gzip -cd itpp-<VERSION>.tar.gz | tar xf - 
% cd itpp-<VERSION> 
\endcode

\code 
% bzip2 -cd itpp-<VERSION>.tar.bz2 | tar xf - 
% cd itpp-<VERSION> 
\endcode

Since version 3.9.0, the IT++ library uses autoconf, automake and libtool
for preparing Makefiles and configuration script, so the compilation
procedure resembles a standard, well-known GNU method, i.e. 

\code 
% ./configure
% make
\endcode

The \c `configure' command can be invoked with additional switches and
options (run <tt>`./configure --help'</tt> to get a list of them). The
most important are:
- \c `--prefix=PREFIX' - set top installation directory to a certain \c
  PREFIX value. By default it is set to \c `/usr/local', so <tt>`make
  install'</tt> will install appropriate files into \c `/usr/local/include',
  \c `/usr/local/lib`, etc.
- \c `--enable-debug' - build an extra library named \c `libitpp_debug.*'
  using special debugging flags for compiler and linker (disabled by default)
- \c `--enable-exceptions' - enable exceptions handling of run-time errors
  instead of aborting the program (disabled by default)
- \c `--disable-html-doc' - do not generate and install the HTML
  documentation (enabled by default)
- \c `--disable-shared' - do not build the shared version of the library
  (enabled by  default for non Windows based platforms)
- \c `--disable-static' - do not build the static version of the library
  (enabled by default)
.
Plese note that each \c `--enable-\<OPTION\>' switch can be replaced
with its opposite switch \c `--disable-\<OPTION\>'.

Since version 4.0.0, a modularization of the library has been introduced.
Therefore, several additional switches have been added to the configure
script, which can be used to disable building some of the library
components. Here is a list of them:
- \c `--disable-comm' - do not build the `Communications' module
- \c `--disable-fixed' - do not build the `Fixed-point' module
- \c `--disable-protocol' - do not include the `Protocols' module
- \c `--disable-signal' - do not build the `Signal processing' module
- \c `--disable-srccode' - do not build the `Source coding' module

By default, the \c `configure' script checks for a few external libraries,
which might be used by the IT++ library (cf. \ref requirements). The
detection procedure is as follows:
-# First, the presence of a BLAS library among the MKL, ACML, ATLAS and
   NetLib's reference BLAS is checked. If one of the above mentioned can be
   used, \c HAVE_BLAS is defined.
-# If the BLAS library can be found, the C interface of BLAS, namely CBLAS,
   is detected. The CBLAS is provided by default by the MKL, ATLAS and
   NetLib's reference CBLAS libraries. The ACML has also a C interface of
   BLAS, which can be used, but it is not compatible with the standard
   CBLAS. On success, \c HAVE_CBLAS is defined.
-# Next, some LAPACK library is searched, but only if a BLAS library
   is available. Full set of LAPACK routines can be found in the MKL, ACML
   and NetLib's reference LAPACK libraries. Besides, the ATLAS contains a
   subset of optimised LAPACK routines, which can be used with NetLib's LAPACK
   library (this is described in the ATLAS documentation). If a LAPACK
   library can be found, \c HAVE_LAPACK is defined.
-# Finally, a set of separate checks for some FFT library is executed.
   Currently three different libraries providing FFT/IFFT routines can be
   used: MKL, ACML and FFTW. If at least one of them is found, \c HAVE_FFT
   id defined. Besides, one of the following: \c HAVE_FFT_MKL8, \c
   HAVE_FFT_ACML or \c HAVE_FFTW3 is defined. 

If some external libraries are installed in a non-standard location in your
system, e.g. MKL in \c `/opt/intel/mkl/8.0.1', the \c `configure' script 
will not detect them automatically. In such a case, you should use LDFLAGS
and CPPFLAGS environment variables to define additional directories to be
searched for libraries (LDFLAGS) and include files (CPPFLAGS). For instance,
to configure IT++ to link to the MKL 8.0.1 external library, which is
installed in <tt>`/opt/intel/mkl/8.0.1'</tt> directory, you should use the
following commands:

\code
% export LDFLAGS="-L/opt/intel/mkl/8.0.1/lib/32"
% export CPPFLAGS="-I/opt/intel/mkl/8.0.1/include"
% ./configure
\endcode

In the case that external libraries have non-standard names, e.g.
<tt>`libcblas-3.a'</tt> for CBLAS, you might specify them to the configure
using \c `--with-\<LIBNAME\>' switches, where \c \<LIBNAME\> is one of the
following: \c `blas', \c `cblas', \c `lapack' or \c `fft'. You might use
more then one library names by quoting them with doublequotes, e.g.

\code
% ./configure --with-blas="-latlas -lblas"
\endcode

If there is only one library specified, you can use a simplified notation
without the preceding `-l', e.g. \c `--with-fft=fftw3' instead of \c 
`--with-fftw=-lfftw3'.

Although it is not recommended, you can intentionally prevent detection of
some external libraries. To do this you should use \c
`--without-\<LIBNAME\>' or \c `--with-\<LIBNAME\>=no', e.g.:

\code
% ./configure --without-cblas --without-lapack
\endcode

It is recommended to set CXXFLAGS environment variable with some
compiler- and platform-specific optimisation flags before invoking the 
\c `configure' command. For example, in the case of using the Intel Pentium
4 processor one might employ the following flags:

\code
% CXXFLAGS="-O3 -pipe -march=pentium4" ./configure
\endcode

In the case of Sun's UltraSPARC 64-bit platform and GCC compiler, the flags
might be set as follows:

\code
% export CXXFLAGS="-O3 -pipe -mcpu=v9 -m64"
% ./confiugre
\endcode

If CXXFLAGS is not set in the environment, it will be initialised with
the default flags, i.e. <tt>"-DASSERT_LEVEL=1 -O3 -pipe"</tt>.

When the configuration process is finished, a status message is displayed. 
For instance, after having invoked the following configuration
command:

\code
% ./configure --with-blas="-lblas"
\endcode

one can observe something like this:

\verbatim
------------------------------------------------------------------------------
itpp-4.0.0 library configuration:
------------------------------------------------------------------------------

Directories:
  - prefix ......... : /usr/local
  - exec_prefix .... : ${prefix}
  - includedir ..... : ${prefix}/include
  - libdir ......... : ${exec_prefix}/lib
  - docdir ......... : ${prefix}/share/doc/itpp-4.0.0

Switches:
  - debug .......... : no
  - exceptions ..... : no
  - html-doc ....... : yes
  - shared ......... : yes
  - static ......... : yes

Documentation tools:
  - doxygen ........ : yes
  - latex .......... : yes
  - dvips .......... : yes
  - ghostscript .... : yes

Testing tools:
  - diff ........... : yes
  - sed ............ : yes

Optional modules:
  - comm ........... : yes
  - fixed .......... : yes
  - protocol ....... : yes
  - signal ......... : yes
  - srccode ........ : yes

External libs:
  - BLAS ........... : yes
    * MKL .......... : no
    * ACML ......... : no
    * ATLAS ........ : no
  - CBLAS .......... : yes
  - LAPACK ......... : yes
  - FFT ............ : yes
    * MKL .......... : no
    * ACML ......... : no
    * FFTW ......... : yes

Compiler/linker flags/libs/defs:
  - CXX ............ : g++
  - CXXFLAGS ....... : -DASSERT_LEVEL=1 -O3 -pipe
  - CXXFLAGS_DEBUG . : 
  - CPPFLAGS ....... : 
  - LDFLAGS ........ : 
  - LIBS ........... : -lfftw3 -llapack -lcblas -lblas   -L/usr/lib/gcc/i686-pc-
linux-gnu/3.4.6 -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../../../i686-pc-linux
-gnu/lib -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../.. -lfrtbegin -lg2c -lm -l
gcc_s

------------------------------------------------------------------------------
Now type 'make && make install' to build and install itpp-4.0.0 library
------------------------------------------------------------------------------

\endverbatim

Now, it is time for compiling and linking the IT++ library. To do so,
please simply run the following command:

\code
% make
\endcode

IT++ should compile without any errors or warnings. If this is not the
case, please submit a bug-report on the IT++ project page at SourceForge.
Please include information about your OS, compiler version, external
libraries and their versions, etc.

It is recommended that you check if your library has been compiled and
linked properly and works as expected. To do so, you should execute the
testing process:

\code
% make check
\endcode

As a result, you should obtain a similar report:

\verbatim
------------------------------------------------------------------------------
Test `array_test' PASSED.
------------------------------------------------------------------------------
Test `bch_test' PASSED.
------------------------------------------------------------------------------

[...]

------------------------------------------------------------------------------
Test `vec_test' PASSED.
------------------------------------------------------------------------------
Test `vector_test' PASSED.
------------------------------------------------------------------------------
Test `window_test' PASSED.
------------------------------------------------------------------------------
\endverbatim

Check if all the executed tests PASSED. If not, please contact us by filling
a bug-report.

Finally, you should install the compiled and linked library, include files
and (optionally) HTML documentation by typing:

\code
% make install
\endcode

Depending on the \c PREFIX settings during configuration, you might need
the root (administrator) access to perform this step.

Eventually, you might invoke the following command

\code
% make clean
\endcode

to remove all files created during compilation process, or even

\code
% make distclean
\endcode

to remove all files generated by the \c `configure' script.


\section macosx Instructions for IT++ Configuration on MacOS X

To compile and use IT++ under Mac OS X, you should install the latest
version of Apple's developer tools. The tools are delivered with MacOS X,
but you may need to unpack them. The configuration procedure is similar to
the one described above.

There is one known problem with configuration on MacOS X. Here is the error
message that might occur:

\code
checking for Fortran libraries of g77... -lcrt2.o -L/sw/lib/gcc/powerpc-apple-da
rwin8.4.0/3.4.3 -L/sw/lib/gcc/powerpc-apple-darwin8.4.0/3.4.3/../../.. -lm -lfrt
begin -lg2c -lSystemStubs -lSystem -lmx /usr/lib/gcc/powerpc-apple-darwin8/4.0.1
/libgcc.a 
checking for dummy main to link with Fortran libraries... unknown 
configure: error: linking to Fortran libraries from C fails 
See `config.log' for more details. 
\endcode

We have found out that this error is caused by a possible bug in an autoconf
macro, which is responsible for setting FLIBS used for linking with fortran
libraries. The problem is with "-lcrt2.o", which shouldn't be there.
 
The know solution is to set FLIBS by hand, e.g.:

\code
% FLIBS="-L/sw/lib -lg2c" ./configure 
\endcode

or if it does not work, the one detected by autoconf omitting "-lcrt2.o": 

\code
% FLIBS="-L/sw/lib/gcc/powerpc-apple-darwin8.4.0/3.4.3 -L/sw/lib -lm -lfrtbegin 
-lg2c -lSystemStubs -lSystem -lmx /usr/lib/gcc/powerpc-apple-darwin8/4.0.1/libg
cc.a" 
% ./configure 
\endcode

BLAS and LAPACK support can be obtained with the \c vecLib framework, but
you must then use Apple's GCC compiler. Hence, only FFTW is then needed to
be installed externally.


\section localinst How To Set Up a Local, Dual-config IT++ Installation without Being Root

This section presents a walkthrough of how to easily set up an IT++
environment in a "dual-config" fashion, so that one can compile programs
with and without debugging. No need to be "root"; all files are installed
locally.

The philosophy is:
- to locally install all external libraries (lapack, fftw, etc.) from
  scratch; this is because we have found that not all precompiled libraries
  which come with some Linux distributions, work properly with IT++ (e.g.
  lapack-3.0-3 from Fedora Core 3)
- to install two parallel IT++ libraries: one optimized and one for
  debugging
- to use static linking only (this gives larger executables but is much
  easier to use in this dual-config setup as one avoids using the \c
  LD_LIBRARY_PATH variable)

The installation procedure goes as follows (\c $HOME can be replaced by any
directory where you have write access):
<ol>
<li> Download itpp-external-2.1.1.tar.gz and itpp-3.10.0.tar.gz. Save
them in your \c $HOME directory, and unpack them:
\code
% cd $HOME
% tar xzf itpp-external-2.1.1.tar.gz
% tar xzf itpp-3.10.0.tar.gz
\endcode
</li>

<li> Compile and install the external libs
\code
% cd $HOME/itpp-external-2.1.1
% make distclean
% ./configure --prefix=$HOME/it++external-2.1.1 --disable-shared
% make && make install
\endcode
</li>

<li> Compile and install the optimized IT++ and the debug IT++ library
\code
% export LDFLAGS=-L$HOME/it++external-2.1.1/lib
% export CPPFLAGS=-I$HOME/it++external-2.1.1/include
% cd $HOME/itpp-3.10.0
% make distclean
% ./configure --disable-shared --prefix=$HOME/it++3.10.0 --enable-debug
% make && make install
% make check 
\endcode
</li>

<li> Check that all tests resulted in "PASSED" </li>

<li> Go to a temporary directory, and create the following program \c
example.cpp:
\code
#include <itpp/itbase.h>
using namespace itpp;
using namespace std;

int main()
{
  for (int i = 0; i < 10; i++) {
    mat X = randn(500, 500);
    mat Z = chol(X * X.transpose());
    cout << Z(0, 0) << endl;
  }

  for (int i = 0; i < 10; i++) {
    cvec a = fft(to_cvec(randn(10000)));
    cout << a(5) << endl;
  }

  it_assert0(1==0,"Debugging was on!");
}
\endcode

Also, in the same directory, create the following \c Makefile:
\code
FLAGS_DEBUG = `$(HOME)/it++3.10.0/bin/itpp-config --cflags-debug`
FLAGS_OPT   = `$(HOME)/it++3.10.0/bin/itpp-config --cflags-opt`

LIBS_DEBUG  = `$(HOME)/it++3.10.0/bin/itpp-config --libs-debug`
LIBS_OPT    = `$(HOME)/it++3.10.0/bin/itpp-config --libs-opt`

example: example.cpp
	g++ $(FLAGS_DEBUG) example.cpp -o example_debug  $(LIBS_DEBUG)
	g++ $(FLAGS_OPT) example.cpp -o example_opt  $(LIBS_OPT)
\endcode

This \c Makefile produces two programs: \c example_opt and \c example_debug.
The former is optimized for performance but offers no debugging or
assertions. The latter includes debugging info and is compiled with all
assertions enabled (this generally gives "safe" but slow code).

Run \c make and try the programs \c example_opt and \c example_debug. If
this works the library is ready to use. (The program \c example_debug should
exit with an assertion error.) </li>

<li> If you want to conserve disk space, clean up all temporary files:
\code
% cd $HOME/itpp-external-2.1.1
% make distclean
% cd $HOME/itpp-3.10.0
% make distclean
\endcode

To conserve even more diskspace (remove all sources) then do
\code
% rm -rf $HOME/itpp-external-2.1.1
% rm -rf $HOME/itpp-3.10.0
\endcode
</li>
</ol>

Note: the \c make \c distclean commands in some steps may result in an error
message; just ignore this. But the command is recommended because it
guarantees that you start with a clean directory, in the event you would
repeat the installation procedure.


\section msvc IT++ Configuration, Compilation and Installation using Microsoft Visual C++ .NET 2003 and Intel MKL

You need to perform the following tasks in order to compile IT++ with
Microsoft Visual C++ .NET 2003 together with Intel Math Kernel Library
(MKL): 

<ul>

<li> Install MKL </li>

<li> Ensure that the Windows' \c PATH variable includes
<tt>"C:\Program Files\Intel\MKL\ia32\bin"</tt> (or the folder where
you have installed MKL). This is required for Windows to find the MKL
dll files. Setting the \c PATH variable can be done via the settings
in <tt>"Control Panel -&gt; System properties -&gt; Advanced -&gt;
Environment Variables"</tt>. Note that there are \c PATH variables for
both the user and the system, and at least the system \c PATH should
contain the MKL path. Alternatively you can copy all MKL dll files
from <tt>"C:\Program Files\Intel\MKL\ia32\bin"</tt> to
<tt>"C:\windows\system32"</tt> where Windows also will find
them. Restart the computer to make the PATH change valid. </li>

<li> Compile IT++.</li>

</ul>

The next step is to compile your program and link it with IT++ and MKL.
Observe that several things need to be correctly set up:

<ul>

<li> The IT++ include directory must be found. The settings for this
are found in the menu <tt>"Tools -&gt; Options -&gt; Projects -&gt;
VC++ Directories -&gt; Include Files"</tt>. Add a path to
<tt>"<IT++ source directory>\itpp"</tt>. </li>

<li> The IT++ library directory must be found. The settings for this
are found in the menu <tt>"Tools -&gt; Options -&gt; Projects -&gt;
VC++ Directories -&gt; Library Files"</tt>. Add a path to
<tt>"<IT++ source directory>\lib"</tt>. </li>

<li> The MKL library directory must be found. The settings for this are
found in the menu <tt>"Tools -&gt; Options -&gt; Projects -&gt; VC++
Directories -&gt; Library Files"</tt>. Add a path to 
<tt>"C:\Program Files\Intel\MKL\ia32\lib"</tt>. </li>

<li> Linking with IT++ and MKL must be set up. Do this by marking your
project and go to the menu <tt>"Project -&gt; Properties -&gt;
Configuration Properties -&gt; CC++ -&gt; Linker -&gt; Input -&gt;
Additional Dependencies"</tt>. There you need to add
<tt>itpp_debug.lib</tt> or <tt>itpp.lib</tt> depending on whether
debug or release mode are being used. Furthermore, you need to 
add <tt>mkl_c_dll.lib</tt>. </li>

</ul>

Please note that the project settings for your program must be made for
both the `debug' and `release' mode.

*/
